<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Document</title>
<link rel="stylesheet" as="style" crossorigin
	href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css" />
<style>
section {
	width: 1000px;
	margin: 50px auto;
	display: flex; /* Flexbox 사용 */
	justify-content: center; /* 수평 가운데 정렬 */
	align-items: center; /* 수직 가운데 정렬 */
}

#by-div {
	width: 600px;
	border: 1px solid #eee;
	border-radius: 5px;
	display: flex;
	justify-content: center;
	align-items: center;
	padding: 50px 0;
}

#by-div form {
	display: flex;
	flex-direction: column;
	align-items: center;
}

#by-div input[type="text"] {
	width: 440px;
	height: 50px;
	font-family: "Pretendard Variable", Pretendard;
	border: none; /* 테두리 없애기 */
	border-bottom: 1px solid #ccc; /* 하단에만 연한 테두리 */
	outline: none; /* 포커스 시 기본 테두리 제거 */
	padding: 5px;
	font-size: 16px;
	color: #333;
	margin-bottom: 10px;
	box-sizing: border-box;
}

#by-div input[type="text"]::placeholder {
	color: #999;
	font-size: 13px;
}

#by-div button {
	width: 440px;
	height: 50px;
	font-family: "Pretendard Variable", Pretendard;
	margin-top: 40px;
	background-color: #F5A47E;
	border: none; /* 테두리 없애기 */
	border-radius: 5px;
	color: white;
	font-size: 16px;
	cursor: pointer;
}

#by-div button:hover {
	background-color: #fab18f; /* 마우스 오버 시 색상 변경 */
}
</style>
</head>
<body>
	<header>
		<th:block th:insert="~{/sub/header.html}"></th:block>
	</header>
	<section>
		<div id="by-div">
			<form>
				<input type="text" name="username" id="username" placeholder="아이디">
				<input type="text" name="password" id="password" placeholder="비밀번호">
				<input type="text" name="nickName" id="nickName" placeholder="닉네임">
				<input type="text" name="addr" id="addr" placeholder="주소"> <input
					type="text" name="birth" id="birth" placeholder="생년월일"> <input
					type="text" name="phone" id="phone" placeholder="휴대폰 번호">
				<button id="registBtn">회원가입</button>
			</form>
		</div>
	</section>

	<script>
document.addEventListener("DOMContentLoaded", () => {
	const registbtn = document.querySelector("#registBtn");
	console.log(registbtn);
	registbtn.addEventListener("click", (event) => {
		event.preventDefault();
		
		submitRegist(event);
	});


	function submitRegist(event){
		
		const username = document.getElementById("username").value;
		const password = document.getElementById("password").value;
		const nickName = document.getElementById("nickName").value;
		const addr = document.getElementById("addr").value;
		const birth = document.getElementById("birth").value;
		const phone = document.getElementById("phone").value;
		
		const data = {
				username : username,
				password : password,
				nickName : nickName,
				addr : addr,
				birth : birth,
				phone : phone
		}
		alert(JSON.stringify(data));
		
		const xhttp = new XMLHttpRequest();
		xhttp.onload = function(){
			if(this.status === 200){
				const response = JSON.parse(this.responseText);
				
				if(response === "success"){
					alert("회원가입 성공!");
					window.location.href = "/login_page";
				}else{
					alert("회원가입 실패ㅜ");
				}
			}else{
				alert("서버 오류가 발생했습니다.");
			}
		};
		xhttp.open("POST", "http://localhost:8888/api/login/doRegist");
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send(JSON.stringify(data));
	}
});
</script>
</body>
</html>