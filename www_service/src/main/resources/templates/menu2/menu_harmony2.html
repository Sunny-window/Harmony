<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>냉장고를 부탁해 시즌 2</title>
    <style>
        .king-ingredients-grid {
            display: flex;
            flex-direction: row;
            overflow: auto;
            margin: 36px auto;
            padding: 12px;
            box-shadow: rgba(0, 0, 0, 0.66) 0px 0px 0px 1px;
            border-radius: 2px;
            scrollbar-width: thin;
            scrollbar-color: #ffffff #ffb999;
        }

        .king-ingredient-card {
            width: 100px;
            height: 100px;
            background-color: rgba(250, 177, 143, 0.3);
            border: 1px solid #333;
            padding: 8px;
            margin: 8px;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            /* 자식 요소들이 축소되지 않도록 설정 */
        }

        #deactivation {
            background-color: #000;
            color: rgb(255, 255, 255);
        }

        /* Webkit 브라우저 (Chrome, Safari) */
        .king-ingredients-grid::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }

        .king-ingredients-grid::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
            box-shadow: inset 0 0 5px grey;
        }
    </style>
</head>

<body>
    <header>
        <th:block th:insert="~{/sub/header.html}"></th:block>
    </header>
    <section>
        <div class="king-ingredients-grid">
            <div class="king-ingredient-card">1</div>
            <div class="king-ingredient-card">2</div>
            <div class="king-ingredient-card">3</div>
            <div class="king-ingredient-card">4</div>
            <div class="king-ingredient-card">5</div>
            <div class="king-ingredient-card">6</div>
            <div class="king-ingredient-card">7</div>
            <div class="king-ingredient-card">8</div>
            <div class="king-ingredient-card">9</div>
            <div class="king-ingredient-card">10</div>
            <div class="king-ingredient-card">11</div>
            <div class="king-ingredient-card">12</div>
        </div>

    </section>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            getIngredients();
            cardListAddClickEvent();
        });

        function cardListAddClickEvent() {
            var cardlist = document.querySelectorAll(".king-ingredient-card");
            cardlist.forEach(card => {
                card.addEventListener("click", () => {
                    // id="deactivation" 속성 추가
                    if (card.getAttribute("id") == "deactivation") card.removeAttribute("id", "deactivation");
                    else card.setAttribute("id", "deactivation");
                });
            });
        }

        function getIngredients() {
            console.log('사용자 냉장고의 재료 불러오기');

            fetch('/menu2-api/my-ingredients')
                .then(res => res.json())
                .then(list => {
                    list.forEach(ingredient => {
                        console.log(ingredient);
                    });
                })
        }
    </script>
</body>

</html>